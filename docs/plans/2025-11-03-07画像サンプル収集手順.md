# 画像サンプル収集手順

## 目的

Victory/Defeat/Draw のバナー画像を収集し、テンプレートマッチング PoC や今後の学習データとして活用できるよう、取得／ラベリング／保管の流れを定義する。

## 入力ソース

- 対象ゲーム: Overwatch 2（英語 UI を既定とするが、日本語 UI も必要に応じて取得）
- 収集対象画面:
  - 勝利画面（Victory バナー）
  - 敗北画面（Defeat バナー）
  - 引き分け画面（Draw バナー）
  - カラー設定やアクセシビリティ設定を変更したバリエーション（Colorblind Modes 等）
- 推奨解像度: 1920x1080（16:9）。可能なら 2560x1440 など複数解像度を取得してスケール依存を確認する。

## 収集手順

1. OBS で対象シーンをキャプチャし、Victory/Defeat/Draw の各状態が出現したタイミングでスクリーンショットを取得する。
2. ファイル名規則: `YYYYMMDD_runXX_<outcome>_<variant>.png`（例: `20251103_run01_victory_default.png`）
3. 1セットのセッションにつき、1つのメタデータ JSON を作成する（例: `20251103_run01.json`）。
   - 例:
     ```json
     {
       "run": "20251103_run01",
       "resolution": "1920x1080",
       "ui_language": "en-US",
       "accessibility": "default",
       "samples": [
         {
           "file": "20251103_run01_victory_default.png",
           "label": "victory",
           "notes": "standard victory banner"
         },
         {
           "file": "20251103_run01_defeat_colorblind.png",
           "label": "defeat",
           "notes": "colorblind mode protanopia"
         }
       ]
     }
     ```
4. テンプレート切り出し用に、各バナーの矩形座標（キャプチャ画像の左上原点、ピクセル単位）をメタデータに追記できるようにする（例: `"template_bbox": [x, y, width, height]`）。

## ラベリングルール

- `label`: `"victory"`, `"defeat"`, `"draw"` のいずれか。
- `variant`: 色設定や UI 言語など、特記事項がある場合は `notes` に記述。
- `quality`: ぼかしや UI エフェクトで品質が低い場合は `"quality": "low"` を付与し、PoC では除外できるようにする。
- `source`: キャプチャ方法（OBS スクリーンキャプチャ、録画の切り出し等）を記録し、再取得時の再現性を確保する。

## 保管方針

- リポジトリ直下には格納せず、下記いずれかの方法で共有する。
  - Git LFS を利用する（容量や公開範囲が許容される場合）。
  - 社内ストレージ／クラウドストレージにアップロードし、アクセス権限を制御する。
- `docs/specs/architecture.md` にサンプルデータの置き場所とアクセス手順を追記する（データ準備完了時に実施）。
- ディレクトリー構成例:
  ```
  data/
    samples/
      20251103_run01/
        20251103_run01_victory_default.png
        20251103_run01_defeat_default.png
        20251103_run01_draw_default.png
        20251103_run01.json
  ```

## 収集状況

- `/data/samples/20251103_run01` 〜 `/data/samples/20251103_run04` にデフォルト配色の Victory/Defeat/Draw サンプルを追加済み。各ランの JSON に解像度・UI 言語・アクセシビリティ設定を記録している（例: 日本語 UI + デフォルト配色）。

## TODO

- [x] 初回収集（デフォルト配色）のスクリーンショットを取得する。
- [ ] テンプレート切り出し座標を決定し、メタデータに `template_bbox` を追加する。
- [ ] カラーバリエーション／他言語 UI の追加サンプルを収集する。
- [ ] サンプル保管用ストレージとアクセス方法を決定し、`docs/specs/architecture.md` に追記する。
- [ ] `scripts/poc_detect.py` の README にサンプルデータの取得方法をリンクする。
